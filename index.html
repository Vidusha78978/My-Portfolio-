<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vidusha Chathuranga | Developer & Resume Writer</title>
    <!-- Site Icon (Favicon) - Simple 'V' logo on accent purple background -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%238b5cf6'/><text x='50%' y='80%' font-size='85' text-anchor='middle' fill='%23ffffff' font-family='sans-serif' font-weight='bold'>V</text></svg>">
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Load Tone.js for ambient music -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    
    <!-- Import Playfair Display from Google Fonts for a professional headline style -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">

    <style>
        /* Custom Tailwind Configuration */
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-dark': '#0f172a', /* slate-900 */
                        'secondary-dark': '#1e293b', /* slate-800 */
                        'accent-blue': '#3b82f6', /* blue-500 */
                        'accent-purple': '#8b5cf6', /* violet-500 */
                        'text-light': '#f8fafc', /* slate-50 */
                        'text-muted': '#94a3b8', /* slate-400 */
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['"Playfair Display"', 'serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.8s ease-out forwards',
                        'slide-up': 'slideUp 0.6s ease-out forwards',
                        'menu-enter': 'menuEnter 0.3s ease-out forwards',
                        'menu-exit': 'menuExit 0.3s ease-in forwards'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        /* Animations for mobile menu */
                        menuEnter: {
                            '0%': { opacity: '0', transform: 'scale(0.95)' },
                            '100%': { opacity: '1', transform: 'scale(1)' }
                        },
                        menuExit: {
                            '0%': { opacity: '1', transform: 'scale(1)' },
                            '100%': { opacity: '0', transform: 'scale(0.95)' }
                        }
                    }
                }
            }
        }
        /* Global Styles */
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #f8fafc;
            line-height: 1.6;
            scroll-behavior: smooth;
            position: relative; 
            min-height: 100vh;
        }

        /* Utility for fade-on-scroll: MUST be styled with initial opacity 0 */
        .fade-in-scroll {
            opacity: 0;
            transform: translateY(30px) rotate(-3deg) scale(0.98); 
            transition: opacity 0.7s ease-out, transform 0.7s ease-out; 
        }
        .fade-in-scroll.visible {
            opacity: 1;
            transform: translateY(0) rotate(0deg) scale(1); 
        }

        /* Custom Scrollbar for a sleek look */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #3b82f6; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #5a9bff; }
        
        /* The border-r-2 creates the classic "typing cursor" effect */
        #role-text {
            border-right: 2px solid #8b5cf6; /* Matches accent-purple */
            padding-right: 4px; /* Space between text and cursor */
            transition: all 0.1s ease;
        }

        /* New styles for the Welcome Modal */
        #welcome-modal {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        }
        .modal-enter {
            opacity: 0;
            transform: scale(0.9);
        }
        .modal-enter-active {
            opacity: 1;
            transform: scale(1);
        }
        .modal-exit {
            opacity: 1;
            transform: scale(1);
        }
        .modal-exit-active {
            opacity: 0;
            transform: scale(0.9);
        }
    </style>
</head>
<body class="font-sans">

    <!-- NEW: Mobile Menu (Hidden by default) -->
    <div id="mobile-menu" class="hidden fixed inset-0 z-[100] bg-primary-dark/95 backdrop-blur-lg p-8 flex flex-col items-center justify-center animate-menu-enter">
        <button id="mobile-menu-close" class="absolute top-6 right-6 text-text-light text-3xl p-2 hover:text-red-500 transition">
            <i class="fas fa-times"></i>
        </button>
        <div class="flex flex-col items-center space-y-8">
            <a href="#about" class="mobile-nav-link text-text-light hover:text-accent-blue transition duration-300 font-medium text-3xl">About</a>
            <a href="#skills" class="mobile-nav-link text-text-light hover:text-accent-blue transition duration-300 font-medium text-3xl">Skills</a>
            <a href="#experience" class="mobile-nav-link text-text-light hover:text-accent-blue transition duration-300 font-medium text-3xl">Experience</a>
            <a href="#licenses-certs" class="mobile-nav-link text-text-light hover:text-accent-blue transition duration-300 font-medium text-3xl">Licenses</a>
            <a href="#projects" class="mobile-nav-link text-text-light hover:text-accent-blue transition duration-300 font-medium text-3xl">Projects</a>
            <a href="gallery.html" target="_blank" rel="noopener noreferrer" class="text-text-light hover:text-accent-blue transition duration-300 font-medium text-3xl">Gallery</a>
            <a href="#contact" class="mobile-nav-link text-text-light hover:text-accent-blue transition duration-300 font-medium text-3xl">Contact</a>
            <a href="me.html" target="_blank" rel="noopener noreferrer" class="text-text-light hover:text-accent-blue transition duration-300 font-medium flex items-center text-3xl" title="Private Section">
                <i class="fas fa-lock mr-2"></i>Me
            </a>
        </div>
    </div>
    <!-- END Mobile Menu -->


    <!-- Welcome Greeting Modal -->
    <div id="welcome-modal" class="fixed inset-0 z-[60] flex items-center justify-center bg-primary-dark/80 backdrop-blur-sm modal-enter hidden">
        <div class="bg-secondary-dark p-8 rounded-xl shadow-2xl max-w-sm w-full text-center border-2 border-accent-purple transform transition duration-500">
            <i class="fas fa-hand-wave text-5xl text-accent-blue mb-4"></i>
            <h3 class="text-3xl font-bold text-accent-purple mb-2 font-display">Welcome!</h3>
            <p class="text-text-light mb-6">
                I'm glad you stopped by! Feel free to explore my projects and skills.
            </p>
            <button onclick="hideWelcomeModal()" class="px-6 py-2 bg-accent-blue text-white font-semibold rounded-lg shadow-lg hover:bg-blue-600 transition duration-300 transform hover:scale-105">
                Start Exploring <i class="fas fa-arrow-right ml-1"></i>
            </button>
        </div>
    </div>
    <!-- END Welcome Greeting Modal -->

    <!-- Ambient Music Toggle Button (Click this to start the music!) -->
    <button id="musicToggle" class="fixed bottom-4 right-4 z-50 p-3 rounded-full bg-accent-purple text-white shadow-lg transition duration-300 hover:bg-violet-600 focus:outline-none focus:ring-4 focus:ring-violet-300 transform hover:scale-105" aria-label="Toggle ambient music">
        <i class="fas fa-volume-mute" id="musicIcon"></i>
    </button>
    
    <!-- Header & Navigation -->
    <header class="sticky top-0 z-40 bg-primary-dark/95 backdrop-blur-sm shadow-lg border-b border-secondary-dark">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <!-- Internal link, no target="_blank" -->
            <a href="#home" class="text-2xl font-bold text-accent-blue hover:text-accent-purple transition duration-300">Vidusha C.</a>
            
            <!-- Desktop Navigation: Hides on mobile (hidden), shows on medium screens and up (md:flex) -->
            <div class="space-x-4 hidden md:flex items-center">
                <!-- Internal links, no target="_blank" -->
                <a href="#about" class="text-text-light hover:text-accent-blue transition duration-300 font-medium">About</a>
                <a href="#skills" class="text-text-light hover:text-accent-blue transition duration-300 font-medium">Skills</a>
                <a href="#experience" class="text-text-light hover:text-accent-blue transition duration-300 font-medium">Experience</a>
                <a href="#licenses-certs" class="text-text-light hover:text-accent-blue transition duration-300 font-medium">Licenses</a>
                <a href="#projects" class="text-text-light hover:text-accent-blue transition duration-300 font-medium">Projects</a>
                <a href="gallery.html" target="_blank" rel="noopener noreferrer" class="text-text-light hover:text-accent-blue transition duration-300 font-medium">Gallery</a>
                <a href="#contact" class="text-text-light hover:text-accent-blue transition duration-300 font-medium">Contact</a>
                <!-- Link to the private page -->
                <a href="me.html" target="_blank" rel="noopener noreferrer" class="text-text-light hover:text-accent-blue transition duration-300 font-medium flex items-center" title="Private Section">
                    <i class="fas fa-lock mr-2"></i>Me
                </a>
            </div>
            
            <!-- NEW: Mobile Menu Button (Hamburger Icon) -->
            <!-- Hides on medium screens (md:hidden) -->
            <button id="mobile-menu-button" class="md:hidden text-text-light text-2xl p-2 hover:text-accent-blue transition">
                <i class="fas fa-bars"></i>
            </button>

        </nav>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 space-y-24">

        <!-- 1. Hero Section -->
        <section id="home" class="min-h-[80vh] flex flex-col justify-center items-center text-center pt-16">
            <div class="animate-fade-in space-y-6">
                <!-- Responsive typography -->
                <h1 class="text-6xl sm:text-7xl lg:text-8xl font-extrabold text-white leading-tight bg-clip-text text-transparent bg-gradient-to-r from-accent-blue to-accent-purple font-display">
                    Vidusha Chathuranga
                </h1>
                
                <!-- Dynamic Role Display -->
                <div class="text-xl sm:text-2xl text-text-muted flex justify-center items-center h-8 sm:h-10">
                    <span class="mr-2 hidden sm:inline">I am a</span>
                    <span id="role-text" class="font-bold text-accent-purple inline-block whitespace-nowrap overflow-hidden"></span>
                </div>
                <!-- End Dynamic Role Display -->

                <!-- Internal link, no target="_blank" -->
                <a href="#projects" class="inline-block px-8 py-3 mt-8 text-lg font-semibold text-white bg-accent-purple rounded-full shadow-lg shadow-violet-500/50 hover:bg-violet-600 transition duration-300 transform hover:scale-105 animate-slide-up">
                    View My Work <i class="fas fa-arrow-right ml-2"></i>
                </a>
            </div>
        </section>

        <!-- 2. About/Profile Section -->
        <section id="about" class="py-12 border-t border-secondary-dark">
            <h2 class="text-4xl font-bold text-accent-blue mb-10 text-center fade-in-scroll">
                <i class="fas fa-user-circle mr-3"></i> About Me
            </h2>
            <!-- Responsive Grid: Stacks on mobile, 2 columns on medium screens -->
            <div class="grid md:grid-cols-2 gap-12 items-start">
                <!-- Profile Summary (Left Column) -->
                <div class="space-y-6 fade-in-scroll">
                    <h3 class="text-2xl font-semibold text-text-light">My Professional Profile</h3>
                    <p class="text-text-muted">
                        As a dedicated and versatile student with a strong foundation in programming languages, 
                        I am proficient in **Python, Java, and C#**. My practical experience includes building and 
                        customizing websites as a **WordPress Developer**. I also have a keen eye for detail and 
                        strong writing skills, which I leverage as a **Freelance Resume Writer** to create professional 
                        and compelling profiles. I am eager to apply my technical and creative skills to challenging roles.
                    </p>
                    <p class="text-text-muted">
                        Currently an undergraduate pursuing a Higher National Diploma in Information Technology at SLIATE 
                        and completing a Full Stack Developer Course at the University of Moratuwa (CODL).
                    </p>
                </div>

                <!-- Image + Personal Details + Languages (Right Column) -->
                <div class="space-y-6"> 
                    <!-- Profile Photo Card -->
                    <div class="p-6 bg-secondary-dark rounded-xl shadow-xl fade-in-scroll flex justify-center transform transition duration-500 hover:scale-[1.05]">
                        <!-- External link: Added target="_blank" -->
                        <a href="https://www.linkedin.com/in/vidusha-chathuranga-51a334241" target="_blank" rel="noopener noreferrer" aria-label="View LinkedIn Profile">
                            <div id="profile-picture-container" class="w-48 h-48 rounded-full border-4 border-accent-purple shadow-2xl flex items-center justify-center bg-primary-dark transition duration-500 hover:scale-105 overflow-hidden">
                                <img 
                                    id="profile-image"
                                    src="https://avatars.githubusercontent.com/u/114267552?s=400&u=60b0ab3bf4af6af5ee0cfc69fb03a1156d507b41&v=4" 
                                    alt="Vidusha Chathuranga Profile Picture" 
                                    class="w-full h-full object-cover"
                                    onerror="this.style.display='none'; document.getElementById('fallback-icon').style.display='flex';"
                                >
                                <!-- Fallback Icon (initially hidden) -->
                                <div id="fallback-icon" class="hidden w-full h-full items-center justify-center">
                                    <i class="fas fa-user-tie text-8xl text-accent-purple"></i>
                                </div>
                            </div>
                        </a>
                    </div>
                    <!-- Bio Details Card -->
                    <div id="bio-details" class="p-6 bg-secondary-dark rounded-xl shadow-xl fade-in-scroll"></div>
                    <!-- Language Proficiency Card -->
                    <div id="language-skills" class="p-6 bg-secondary-dark rounded-xl shadow-xl fade-in-scroll"></div>
                </div>
            </div>
        </section>

        <!-- 3. Skills Section -->
        <section id="skills" class="py-12 border-t border-secondary-dark">
            <h2 class="text-4xl font-bold text-accent-blue mb-10 text-center fade-in-scroll">
                <i class="fas fa-cogs mr-3"></i> Core Skills
            </h2>
            <!-- Responsive Grid: 2 cols on mobile, 3 on sm, 4 on md, 5 on lg -->
            <div id="skills-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
                <!-- Skills will be rendered here by JavaScript -->
            </div>
        </section>

        <!-- 4. Work & Education Experience -->
        <section id="experience" class="py-12 border-t border-secondary-dark">
            <h2 class="text-4xl font-bold text-accent-blue mb-10 text-center fade-in-scroll">
                <i class="fas fa-briefcase mr-3"></i> Work & Education
            </h2>
            <div id="experience-container" class="space-y-8 relative">
                <!-- Vertical timeline line -->
                <div class="absolute left-4 top-0 h-full w-0.5 bg-secondary-dark"></div>
                <!-- Experience items will be rendered here -->
            </div>
        </section>
        
        <!-- 5. Licenses & Certifications Section -->
        <section id="licenses-certs" class="py-12 border-t border-secondary-dark">
            <h2 class="text-4xl font-bold text-accent-blue mb-10 text-center fade-in-scroll">
                <i class="fas fa-award mr-3"></i> Licenses & Certificates
            </h2>
            <!-- Responsive Container: Centered and max-width -->
            <div class="bg-secondary-dark p-8 rounded-xl shadow-xl text-center max-w-2xl mx-auto fade-in-scroll">
                 <i class="fas fa-shield-alt text-5xl text-accent-purple mb-4"></i>
                <h3 class="text-2xl font-semibold text-text-light mb-3">View My Credentials</h3>
                <p class="text-text-muted mb-6">
                    For security reasons, LinkedIn does not allow its content to be embedded here. Please click the button below to view my full list of licenses and certifications in a new tab.
                </p>
                <!-- External link: Added target="_blank" -->
                <a href="https://www.linkedin.com/in/vidusha-chathuranga-51a334241/details/certifications/" target="_blank" rel="noopener noreferrer" class="inline-block px-6 py-3 bg-accent-blue text-white font-semibold rounded-lg shadow-lg hover:bg-blue-600 transition duration-300 transform hover:scale-105">
                    View on LinkedIn <i class="fas fa-external-link-alt ml-2"></i>
                </a>
            </div>
        </section>

        <!-- 6. Featured Projects Section -->
        <section id="projects" class="py-12 border-t border-secondary-dark">
            <h2 class="text-4xl font-bold text-accent-blue mb-10 text-center fade-in-scroll">
                <i class="fas fa-project-diagram mr-3"></i> Featured Projects
            </h2>
            <!-- Responsive Grid: Stacks on mobile, 2 columns on medium screens -->
            <div id="projects-container" class="grid md:grid-cols-2 gap-8">
                <!-- Projects will be rendered here by JavaScript -->
            </div>
        </section>

        <!-- 7. Gallery Section (Placeholder) -->
        <section id="gallery" class="py-12 border-t border-secondary-dark">
            <h2 class="text-4xl font-bold text-accent-blue mb-10 text-center fade-in-scroll">
                <i class="fas fa-images mr-3"></i> Gallery
            </h2>
            <div class="text-center text-text-muted fade-in-scroll">
                <p>This section is currently under construction.</p>
                <p>Check back soon to see visual showcases of my work!</p>
                <a href="gallery.html" target="_blank" rel="noopener noreferrer" class="inline-block mt-4 px-6 py-3 bg-accent-purple text-white font-semibold rounded-lg shadow-lg hover:bg-violet-600 transition duration-300 transform hover:scale-105">
                    Open Gallery Page <i class="fas fa-external-link-alt ml-2"></i>
                </a>
            </div>
        </section>

        <!-- 8. Get In Touch Section -->
        <section id="contact" class="py-12 border-t border-secondary-dark">
            <h2 class="text-4xl font-bold text-accent-blue mb-10 text-center fade-in-scroll">
                <i class="fas fa-envelope-open-text mr-3"></i> Get In Touch
            </h2>
            <!-- Responsive Grid: 1 col on mobile, 2 on sm, 3 on md -->
            <div id="contact-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 max-w-4xl mx-auto">
                <!-- Contact items will be rendered here -->
            </div>
        </section>

    </main>
    
    <!-- Footer -->
    <footer class="bg-primary-dark border-t-2 border-secondary-dark py-8 text-center text-text-muted">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <p>&copy; <span id="footer-year"></span> Vidusha Chathuranga. All Rights Reserved.</p>
            <p>Designed with a passion for code and creativity.</p>
            <p class="mt-2 text-sm">Kandy, Sri Lanka</p>
        </div>
    </footer>

    <script>
        // --- DATA OBJECT ---
        // Centralized data for easy portfolio updates.
        const portfolioData = {
            profile: {
                name: "Vidusha Chathuranga",
                // Corrected WhatsApp number
                whatsappNumber: "94786217491", 
                birthDate: "03/13/2004", // MM/DD/YYYY format for reliable calculation
                city: "Kandy" 
            },
            skills: [
                { name: "HTML5", icon: "fab fa-html5", color: "text-orange-500" },
                { name: "CSS3", icon: "fab fa-css3-alt", color: "text-blue-500" },
                { name: "JavaScript", icon: "fab fa-js-square", color: "text-yellow-400" },
                { name: "WordPress", icon: "fab fa-wordpress", color: "text-blue-400" },
                { name: "PHP", icon: "fab fa-php", color: "text-indigo-400" },
                { name: "Python", icon: "fab fa-python", color: "text-green-500" },
                { name: "Java", icon: "fab fa-java", color: "text-red-500" },
                { name: "C# / .NET", icon: "fas fa-code", color: "text-purple-500" },
                { name: "SQL", icon: "fas fa-database", color: "text-sky-400" },
                { name: "Git / GitHub", icon: "fab fa-github", color: "text-gray-300" },
                { name: "MS Office", icon: "fas fa-file-word", color: "text-blue-600" },
                { name: "Resume Writing", icon: "fas fa-file-alt", color: "text-teal-400" }
            ],
            experience: [
                {
                    type: 'Work',
                    title: "Wordpress Developer (Intern)",
                    institution: "Allaboutwebservices.com Inc",
                    period: "August 2025 - Present",
                    description: "Responsible for website content management, WordPress development and maintenance, and integrating AI tools to enhance functionality.",
                    icon: "fas fa-briefcase"
                },
                {
                    type: 'Work',
                    title: "Freelance Resume Writer",
                    institution: "Self-Employed",
                    period: "2023 - Present",
                    description: "Crafted tailored resumes for clients across different industries, highlighting their skills, achievements, and qualifications to help them land interviews.",
                    icon: "fas fa-pen-nib"
                },
                {
                    type: 'Education',
                    title: "Higher National Diploma in Information Technology",
                    institution: "Sri Lanka Institute of Advanced Technological Education",
                    institutionLink: "https://sliate.ac.lk/",
                    period: "2024 - Present (Undergraduate)",
                    description: "Pursuing a comprehensive HND focused on core IT principles, software development, and networking.",
                    icon: "fas fa-graduation-cap"
                },
                {
                    type: 'Education',
                    title: "Full Stack Developer Course",
                    institution: "University of Moratuwa (CODL)",
                    period: "2024",
                    description: "Completed an intensive course covering modern full-stack technologies, including front-end frameworks and back-end development.",
                    icon: "fas fa-desktop"
                },
                {
                    type: 'Education',
                    title: "GCE Advanced Level - Engineering Technology",
                    institution: "Jinaraja Boys Collage, Gampola",
                    period: "Completed 2023",
                    description: "Successfully completed A-Levels with a focus on engineering principles and technology.",
                    results: [
                        { subject: "Information Communication Technology", grade: "C" },
                        { subject: "Engineering Technology", grade: "S" },
                        { subject: "Science For Technology", grade: "S" },
                        { subject: "General English", grade: "S" }
                    ],
                    icon: "fas fa-school"
                }
            ],
            projects: [
                 {
                    title: "C# POS System",
                    description: "A comprehensive Point-of-Sale desktop application for retail shops, built to manage inventory, sales, and reporting efficiently.",
                    techStack: ["C#", ".NET Framework", "SQL Server"],
                    liveDemo: "https://github.com/Vidusha78978/POS-system-shop.git",
                    github: "https://github.com/Vidusha78978/POS-system-shop.git",
                    icon: "fas fa-cash-register"
                },
                {
                    title: "Living Miniatures",
                    description: "An e-commerce website for a client specializing in miniature products, featuring a full shopping cart, payment gateway, and product management system.",
                    techStack: ["WordPress", "WooCommerce", "SEO"],
                    liveDemo: "https://livingminiatures.wuaze.com/",
                    github: null,
                    icon: "fas fa-store"
                },
                {
                    title: "Magicyarn - WooCommerce Store",
                    description: "A vibrant online store for a yarn and craft supplies business. Developed a custom theme and integrated advanced e-commerce functionalities.",
                    techStack: ["WordPress", "WooCommerce", "Elementor"],
                    liveDemo: "https://magicyarn.lovestoblog.com/",
                    github: null,
                    icon: "fas fa-shopping-basket"
                },
                {
                    title: "StudyNest",
                    description: "An educational platform built on WordPress, built to deliver online courses. Integrated a Learning Management System (LMS) for course creation and student tracking.",
                    techStack: ["WordPress", "LMS (LearnDash)", "PHP"],
                    liveDemo: "https://studynest.byethost14.com/",
                    github: null,
                    icon: "fas fa-book-reader"
                }
            ]
        };
        // Add contact info dynamically
        portfolioData.contact = [
            {
                title: "Resume",
                details: "Download CV",
                iconClass: "fas fa-file-download",
                link: "https://drive.google.com/uc?id=1KFN-VKsfoY1QyN7Ka1DR2vfn4gbL7xzK",
                animationDelay: "delay-[0ms]",
                color: "bg-accent-purple hover:bg-violet-600",
                download: true,
            },
            {
                title: "Email",
                details: "Send an Email",
                iconClass: "fas fa-envelope",
                link: "mailto:vidushachathuranga78978@gmail.com",
                animationDelay: "delay-[100ms]",
                color: "bg-red-600 hover:bg-red-700"
            },
            {
                title: "WhatsApp",
                details: "Message Me", 
                iconClass: "fab fa-whatsapp",
                link: `https://wa.me/${portfolioData.profile.whatsappNumber}`, 
                animationDelay: "delay-[200ms]",
                color: "bg-green-600 hover:bg-green-700"
            },
            {
                title: "LinkedIn",
                details: "Professional Profile",
                iconClass: "fab fa-linkedin",
                link: "https://www.linkedin.com/in/vidusha-chathuranga-51a334241",
                animationDelay: "delay-[300ms]",
                color: "bg-blue-600 hover:bg-blue-700"
            },
            {
                title: "GitHub",
                details: "Code & Projects",
                iconClass: "fab fa-github",
                link: "https://github.com/Vidusha78978",
                animationDelay: "delay-[400ms]",
                color: "bg-gray-700 hover:bg-gray-800"
            },
            {
                title: "Facebook",
                details: "Social Profile",
                iconClass: "fab fa-facebook",
                link: "https://web.facebook.com/vidusha.chathuranga.2025",
                animationDelay: "delay-[500ms]",
                color: "bg-blue-800 hover:bg-blue-900"
            }
        ];


        // --- DYNAMIC RENDERING FUNCTIONS ---
        
        // Render Bio Details
        function renderBioDetails() {
            try {
                const container = document.getElementById('bio-details');
                if (!container) return;
                const birthDate = new Date(portfolioData.profile.birthDate);
                const today = new Date();
                let age = today.getFullYear() - birthDate.getFullYear();
                const m = today.getMonth() - birthDate.getMonth();
                if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
                    age--;
                }
                const birthDateFormatted = birthDate.toLocaleDateString('en-US', { year: 'numeric', month: '2-digit', day: '2-digit' });

                container.innerHTML = `
                    <h3 class="text-xl font-semibold text-text-light mb-4 text-center">Bio Details</h3>
                    <ul class="space-y-3 text-text-muted">
                        <li class="flex items-center"><i class="fas fa-birthday-cake w-6 text-center text-accent-purple mr-3"></i><strong class="text-text-light">${birthDateFormatted}</strong></li>
                        <li class="flex items-center"><i class="fas fa-user-clock w-6 text-center text-accent-purple mr-3"></i><strong class="text-text-light">${age} Years Old</strong></li>
                        <li class="flex items-center"><i class="fas fa-map-marker-alt w-6 text-center text-accent-purple mr-3"></i><strong class="text-text-light">${portfolioData.profile.city}</strong></li>
                    </ul>
                `;
            } catch (error) {
                console.error("Failed to render bio details:", error);
            }
        }

        // Render Language Skills
        function renderLanguageSkills() {
            try {
                const container = document.getElementById('language-skills');
                if (!container) return;
                container.innerHTML = `
                    <h3 class="text-xl font-semibold text-text-light mb-4 text-center">Language Proficiency</h3>
                    <div class="space-y-4">
                        <div>
                            <div class="flex justify-between mb-1">
                                <span class="text-base font-medium text-text-light">Sinhala</span>
                                <span class="text-sm font-medium text-text-muted">Native</span>
                            </div>
                            <div class="w-full bg-primary-dark rounded-full h-2.5"><div class="bg-accent-blue h-2.5 rounded-full" style="width: 100%"></div></div>
                        </div>
                        <div>
                            <div class="flex justify-between mb-1">
                                <span class="text-base font-medium text-text-light">English</span>
                                <span class="text-sm font-medium text-text-muted">Conversational</span>
                            </div>
                            <div class="w-full bg-primary-dark rounded-full h-2.5"><div class="bg-accent-blue h-2.5 rounded-full" style="width: 75%"></div></div>
                        </div>
                    </div>
                `;
            } catch (error) {
                console.error("Failed to render language skills:", error);
            }
        }
        
        // Render Core Skills
        function renderSkills() {
            try {
                const container = document.getElementById('skills-container');
                if (!container) return;
                container.innerHTML = portfolioData.skills.map((skill, index) => `
                    <div class="group bg-secondary-dark p-4 text-center rounded-xl shadow-lg border-2 border-transparent hover:border-accent-purple hover:bg-accent-purple transition duration-300 transform hover:-translate-y-2 fade-in-scroll" style="transition-delay: ${index * 50}ms">
                        <i class="${skill.icon} text-4xl mb-2 ${skill.color} group-hover:text-white transition duration-300"></i>
                        <p class="font-semibold text-text-light group-hover:text-white transition duration-300">${skill.name}</p>
                    </div>
                `).join('');
            } catch (error) {
                console.error("Failed to render skills:", error);
            }
        }
        
        // Render Experience and Education
        function renderExperience() {
            try {
                const container = document.getElementById('experience-container');
                if (!container) return;
                container.innerHTML = portfolioData.experience.map((item, index) => `
                    <div class="relative pl-10 fade-in-scroll" style="transition-delay: ${index * 100}ms">
                        <div class="absolute left-4 top-1 transform -translate-x-1/2 w-4 h-4 ${item.type === 'Work' ? 'bg-accent-blue' : 'bg-accent-purple'} rounded-full border-4 border-primary-dark"></div>
                        <div class="p-4 bg-secondary-dark rounded-xl shadow-lg">
                            <h3 class="text-xl font-bold text-text-light flex items-center">
                                <i class="${item.icon} mr-3 text-accent-blue"></i> ${item.title}
                            </h3>
                            <p class="text-text-muted font-semibold">
                                ${item.institutionLink ? `<a href="${item.institutionLink}" target="_blank" rel="noopener noreferrer" class="hover:text-accent-purple hover:underline">${item.institution}</a>` : item.institution}
                            </p>
                            <p class="text-sm text-accent-blue font-mono mb-2">${item.period}</p>
                            <p class="text-text-muted">${item.description}</p>
                            ${item.results ? `
                                <div class="mt-3 pt-3 border-t border-primary-dark">
                                    <h4 class="font-semibold text-text-light mb-2">A/L Results:</h4>
                                    <ul class="list-disc list-inside text-text-muted space-y-1">
                                        ${item.results.map(res => `<li><strong>${res.subject}:</strong> ${res.grade}</li>`).join('')}
                                    </ul>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error("Failed to render experience:", error);
            }
        }
        
        // Render Featured Projects
        function renderProjects() {
            try {
                const container = document.getElementById('projects-container');
                if (!container) return;
                container.innerHTML = portfolioData.projects.map((project, index) => `
                    <div class="bg-secondary-dark rounded-xl shadow-xl overflow-hidden flex flex-col fade-in-scroll" style="transition-delay: ${index * 100}ms">
                        <div class="p-6 flex-grow">
                            <div class="flex items-center mb-3">
                                <i class="${project.icon} text-3xl text-accent-blue mr-4"></i>
                                <h3 class="text-2xl font-bold text-text-light">${project.title}</h3>
                            </div>
                            <p class="text-text-muted mb-4">${project.description}</p>
                            <div class="flex flex-wrap gap-2 mb-4">
                                ${project.techStack.map(tech => `<span class="bg-primary-dark text-accent-blue text-xs font-mono px-2 py-1 rounded-full">${tech}</span>`).join('')}
                            </div>
                        </div>
                        <div class="bg-primary-dark p-4 flex gap-4">
                            ${project.liveDemo ? `<a href="${project.liveDemo}" target="_blank" rel="noopener noreferrer" class="flex-1 text-center bg-accent-blue text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-600 transition duration-300">
                                ${project.github === project.liveDemo ? 'View Source' : 'Live Demo'}
                            </a>` : ''}
                            ${project.github && project.github !== project.liveDemo ? `<a href="${project.github}" target="_blank" rel="noopener noreferrer" class="flex-1 text-center bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-gray-700 transition duration-300">GitHub</a>` : ''}
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error("Failed to render projects:", error);
            }
        }
        
        // Render Contact Information
        function renderContact() {
            try {
                const container = document.getElementById('contact-container');
                if (!container) return;
                container.innerHTML = portfolioData.contact.map(item => `
                    <a href="${item.link}" 
                       ${item.download ? 'download' : 'target="_blank" rel="noopener noreferrer"'} 
                       class="group ${item.color} p-6 text-center rounded-xl shadow-lg transition duration-300 transform hover:-translate-y-2 fade-in-scroll" 
                       style="transition-delay: ${item.animationDelay}">
                        <i class="${item.iconClass} text-5xl text-white mb-3 transition duration-300 transform group-hover:scale-110"></i>
                        <h4 class="text-xl font-bold text-white">${item.title}</h4>
                        <p class="text-gray-200">${item.details}</p>
                    </a>
                `).join('');
            } catch (error) {
                console.error("Failed to render contact info:", error);
            }
        }
        
        // --- ANIMATION & EVENT LISTENERS ---

        // Function for role typing animation
        function typeRoles() {
            try {
                const roles = ["Full Stack Aspirant", "Versatile WordPress Developer", "Professional Resume Writer"];
                let roleIndex = 0;
                let charIndex = 0;
                let isDeleting = false;
                const typingSpeed = 100;
                const deletingSpeed = 50;
                const delayBetweenRoles = 1500;
                const roleTextElement = document.getElementById('role-text');
                if(!roleTextElement) return; // Guard clause

                function type() {
                    const currentRole = roles[roleIndex];
                    if (isDeleting) {
                        roleTextElement.textContent = currentRole.substring(0, charIndex - 1);
                        charIndex--;
                    } else {
                        roleTextElement.textContent = currentRole.substring(0, charIndex + 1);
                        charIndex++;
                    }

                    if (!isDeleting && charIndex === currentRole.length) {
                        setTimeout(() => isDeleting = true, delayBetweenRoles);
                    } else if (isDeleting && charIndex === 0) {
                        isDeleting = false;
                        roleIndex = (roleIndex + 1) % roles.length;
                    }

                    const speed = isDeleting ? deletingSpeed : typingSpeed;
                    setTimeout(type, speed);
                }
                type();
            } catch(e) { console.error("Typing animation failed:", e); }
        }

        // Welcome Modal Logic
        function showWelcomeModal() {
            try {
                const modal = document.getElementById('welcome-modal');
                if (modal && !sessionStorage.getItem('welcomeShown')) {
                    modal.classList.remove('hidden');
                    setTimeout(() => modal.classList.add('modal-enter-active'), 10);
                    
                    setTimeout(() => {
                        hideWelcomeModal();
                    }, 4000); // Auto-hide after 4 seconds
                    
                    sessionStorage.setItem('welcomeShown', 'true');
                }
            } catch(e) {
                console.error("Error showing welcome modal:", e);
            }
        }

        function hideWelcomeModal() {
            try {
                const modal = document.getElementById('welcome-modal');
                if (modal) {
                    modal.classList.remove('modal-enter-active');
                    modal.classList.add('modal-exit-active');
                    setTimeout(() => modal.classList.add('hidden'), 500);
                }
            } catch (e) {
                console.error("Error hiding welcome modal:", e);
            }
        }
        
        // Main function to run on window load
        window.onload = function() {
            
            try {
                const yearSpan = document.getElementById('footer-year');
                if (yearSpan) yearSpan.textContent = new Date().getFullYear();
            } catch (e) { console.error("Footer year error:", e); }
            
            // IMPROVED: Wrapped each render function in its own try/catch
            // This prevents one failing function from stopping the others.
            try { renderBioDetails(); } catch (e) { console.error("renderBioDetails failed:", e); }
            try { renderLanguageSkills(); } catch (e) { console.error("renderLanguageSkills failed:", e); }
            try { renderSkills(); } catch (e) { console.error("renderSkills failed:", e); }
            try { renderExperience(); } catch (e) { console.error("renderExperience failed:", e); }
            try { renderProjects(); } catch (e) { console.error("renderProjects failed:", e); }
            try { renderContact(); } catch (e) { console.error("renderContact failed:", e); }
            try { typeRoles(); } catch (e) { console.error("typeRoles failed:", e); }

            
            // Setup fade-on-scroll animations AFTER content is rendered
            try {
                const faders = document.querySelectorAll('.fade-in-scroll');
                if ("IntersectionObserver" in window) {
                    const appearOnScroll = new IntersectionObserver(function(entries, observer) {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                entry.target.classList.add('visible');
                                observer.unobserve(entry.target);
                            }
                        });
                    }, { threshold: 0.1 }); // Trigger when 10% of the element is visible

                    faders.forEach(fader => {
                        if (fader) appearOnScroll.observe(fader);
                    });
                } else {
                    // Fallback for older browsers
                    faders.forEach(fader => {
                        if (fader) fader.classList.add('visible');
                    });
                }
            } catch (e) { console.error("IntersectionObserver failed:", e); }


            // --- AMBIENT MUSIC LOGIC ---
            try {
                const musicToggle = document.getElementById('musicToggle');
                const musicIcon = document.getElementById('musicIcon');
                if (musicToggle && musicIcon) {
                    let musicPlaying = false;
                    let synth;

                    musicToggle.addEventListener('click', async () => {
                        try {
                            await Tone.start();
                        
                            if (!synth) {
                                synth = new Tone.PolySynth(Tone.FMSynth, {
                                    harmonicity: 1.5,
                                    modulationIndex: 10,
                                    envelope: { attack: 2, decay: 1, sustain: 1, release: 4 },
                                    modulation: { type: "sine" },
                                    modulationEnvelope: { attack: 2, decay: 0.01, sustain: 1, release: 2 }
                                }).toDestination();
                                synth.volume.value = -24; // Lower volume
                            }

                            if (!musicPlaying) {
                                Tone.Transport.scheduleRepeat(time => {
                                    synth.triggerAttackRelease("G2", "4n", time);
                                    synth.triggerAttackRelease("Bb2", "4n", time + 1);
                                    synth.triggerAttackRelease("D3", "4n", time + 2);
                                    synth.triggerAttackRelease("F3", "4n", time + 3);
                                }, "4m");
                                
                                Tone.Transport.start();
                                musicPlaying = true;
                                musicIcon.classList.remove('fa-volume-mute');
                                musicIcon.classList.add('fa-volume-up');
                            } else {
                                Tone.Transport.stop();
                                Tone.Transport.cancel(); // Clear scheduled events
                                musicPlaying = false;
                                musicIcon.classList.remove('fa-volume-up');
                                musicIcon.classList.add('fa-volume-mute');
                            }
                        } catch (e) { console.error("Tone.js error:", e); }
                    });
                }
            } catch (e) { console.error("Music toggle setup failed:", e); }

            // Show the welcome modal
            try {
                showWelcomeModal();
            } catch (e) {
                console.error("Error showing welcome modal:", e);
            }

            // --- NEW: MOBILE MENU LOGIC ---
            try {
                const mobileMenuButton = document.getElementById('mobile-menu-button');
                const mobileMenuClose = document.getElementById('mobile-menu-close');
                const mobileMenu = document.getElementById('mobile-menu');
                const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');

                if (mobileMenuButton && mobileMenuClose && mobileMenu) {
                    mobileMenuButton.addEventListener('click', () => {
                        mobileMenu.classList.remove('hidden');
                        mobileMenu.classList.remove('animate-menu-exit');
                        mobileMenu.classList.add('animate-menu-enter');
                    });

                    const closeMenu = () => {
                        mobileMenu.classList.remove('animate-menu-enter');
                        mobileMenu.classList.add('animate-menu-exit');
                        setTimeout(() => {
                            mobileMenu.classList.add('hidden');
                        }, 300); // Match animation duration
                    };

                    mobileMenuClose.addEventListener('click', closeMenu);

                    // Add event listeners to all mobile nav links to close the menu on click
                    mobileNavLinks.forEach(link => {
                        // Only add for anchor links, not external links
                        if (link.getAttribute('href').startsWith('#')) {
                            link.addEventListener('click', closeMenu);
                        }
                    });
                }
            } catch(e) { console.error("Mobile menu setup failed:", e); }
        };

    </script>

</body>
</html>

