<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vidusha Chathuranga | Developer & Resume Writer</title>
    <!-- Site Icon (Favicon) - Simple 'V' logo on accent purple background -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%238b5cf6'/><text x='50%' y='80%' font-size='85' text-anchor='middle' fill='%23ffffff' font-family='sans-serif' font-weight='bold'>V</text></svg>">
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Load Tone.js for ambient music -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    
    <!-- Import Playfair Display from Google Fonts for a professional headline style -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">

    <style>
        /* Custom Tailwind Configuration */
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-dark': '#0f172a', /* slate-900 */
                        'secondary-dark': '#1e293b', /* slate-800 */
                        'accent-blue': '#3b82f6', /* blue-500 */
                        'accent-purple': '#8b5cf6', /* violet-500 */
                        'text-light': '#f8fafc', /* slate-50 */
                        'text-muted': '#94a3b8', /* slate-400 */
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['"Playfair Display"', 'serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.8s ease-out forwards',
                        'slide-up': 'slideUp 0.6s ease-out forwards',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1', },
                        },
                    }
                }
            }
        }
        /* Global Styles */
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #f8fafc;
            line-height: 1.6;
            scroll-behavior: smooth;
            position: relative; 
            min-height: 100vh;
        }

        /* Utility for fade-on-scroll: MUST be styled with initial opacity 0 */
        .fade-in-scroll {
            opacity: 0;
            transform: translateY(30px) rotate(-3deg) scale(0.98); 
            transition: opacity 0.7s ease-out, transform 0.7s ease-out; 
        }
        .fade-in-scroll.visible {
            opacity: 1;
            transform: translateY(0) rotate(0deg) scale(1); 
        }

        /* Custom Scrollbar for a sleek look */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #3b82f6; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #5a9bff; }
        
        /* The border-r-2 creates the classic "typing cursor" effect */
        #role-text {
            border-right: 2px solid #8b5cf6; /* Matches accent-purple */
            padding-right: 4px; /* Space between text and cursor */
            transition: all 0.1s ease;
        }

        /* New styles for the Welcome Modal */
        #welcome-modal {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        }
        .modal-enter {
            opacity: 0;
            transform: scale(0.9);
        }
        .modal-enter-active {
            opacity: 1;
            transform: scale(1);
        }
        .modal-exit {
            opacity: 1;
            transform: scale(1);
        }
        .modal-exit-active {
            opacity: 0;
            transform: scale(0.9);
        }
    </style>
</head>
<body class="font-sans">

    <!-- Welcome Greeting Modal -->
    <div id="welcome-modal" class="fixed inset-0 z-[60] flex items-center justify-center bg-primary-dark/80 backdrop-blur-sm modal-enter hidden">
        <div class="bg-secondary-dark p-8 rounded-xl shadow-2xl max-w-sm w-full text-center border-2 border-accent-purple transform transition duration-500">
            <i class="fas fa-hand-wave text-5xl text-accent-blue mb-4 animate-bounce-once"></i>
            <h3 class="text-3xl font-bold text-accent-purple mb-2 font-display">Welcome!</h3>
            <p class="text-text-light mb-6">
                I'm glad you stopped by! Feel free to explore my projects and skills.
            </p>
            <button onclick="hideWelcomeModal()" class="px-6 py-2 bg-accent-blue text-white font-semibold rounded-lg shadow-lg hover:bg-blue-600 transition duration-300 transform hover:scale-105">
                Start Exploring <i class="fas fa-arrow-right ml-1"></i>
            </button>
        </div>
    </div>
    <!-- END Welcome Greeting Modal -->

    <!-- Ambient Music Toggle Button (Click this to start the music!) -->
    <button id="musicToggle" class="fixed bottom-4 right-4 z-50 p-3 rounded-full bg-accent-purple text-white shadow-lg transition duration-300 hover:bg-violet-600 focus:outline-none focus:ring-4 focus:ring-violet-300 transform hover:scale-105" aria-label="Toggle ambient music">
        <i class="fas fa-volume-mute" id="musicIcon"></i>
    </button>
    
    <!-- Header & Navigation -->
    <header class="sticky top-0 z-40 bg-primary-dark/95 backdrop-blur-sm shadow-lg border-b border-secondary-dark">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <!-- Internal link, no target="_blank" -->
            <a href="#home" class="text-2xl font-bold text-accent-blue hover:text-accent-purple transition duration-300">Vidusha C.</a>
            <div class="space-x-4 hidden md:flex">
                <!-- Internal links, no target="_blank" -->
                <a href="#about" class="text-text-light hover:text-accent-blue transition duration-300 font-medium">About</a>
                <a href="#skills" class="text-text-light hover:text-accent-blue transition duration-300 font-medium">Skills</a>
                <a href="#experience" class="text-text-light hover:text-accent-blue transition duration-300 font-medium">Experience</a>
                <a href="#licenses-certs" class="text-text-light hover:text-accent-blue transition duration-300 font-medium">Licenses</a>
                <a href="#projects" class="text-text-light hover:text-accent-blue transition duration-300 font-medium">Projects</a>
                <a href="#contact" class="text-text-light hover:text-accent-blue transition duration-300 font-medium">Contact</a>
            </div>
            <!-- Mobile Menu Placeholder -->
        </nav>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 space-y-24">

        <!-- 1. Hero Section -->
        <section id="home" class="min-h-[80vh] flex flex-col justify-center items-center text-center pt-16">
            <div class="animate-fade-in space-y-6">
                <h1 class="text-6xl sm:text-7xl lg:text-8xl font-extrabold text-white leading-tight bg-clip-text text-transparent bg-gradient-to-r from-accent-blue to-accent-purple font-display">
                    Vidusha Chathuranga
                </h1>
                
                <!-- Dynamic Role Display -->
                <div class="text-xl sm:text-2xl text-text-muted animate-slide-up animation-delay-300 flex justify-center items-center h-8 sm:h-10">
                    <span class="mr-2 hidden sm:inline">I am a</span>
                    <span id="role-text" class="font-bold text-accent-purple inline-block whitespace-nowrap overflow-hidden"></span>
                </div>
                <!-- End Dynamic Role Display -->

                <!-- Internal link, no target="_blank" -->
                <a href="#projects" class="inline-block px-8 py-3 mt-8 text-lg font-semibold text-white bg-accent-purple rounded-full shadow-lg shadow-violet-500/50 hover:bg-violet-600 transition duration-300 transform hover:scale-105 animate-slide-up animation-delay-600">
                    View My Work <i class="fas fa-arrow-right ml-2"></i>
                </a>
            </div>
        </section>

        <!-- 2. About/Profile Section -->
        <section id="about" class="py-12 border-t border-secondary-dark">
            <h2 class="text-4xl font-bold text-accent-blue mb-10 text-center fade-in-scroll">
                <i class="fas fa-user-circle mr-3"></i> About Me
            </h2>
            <div class="grid md:grid-cols-2 gap-12 items-start">
                <!-- Profile Summary (Left Column) -->
                <div class="space-y-6 fade-in-scroll">
                    <h3 class="text-2xl font-semibold text-text-light">My Professional Profile</h3>
                    <p class="text-text-muted">
                        As a dedicated and versatile student with a strong foundation in programming languages, 
                        I am proficient in **Python, Java, and C#**. My practical experience includes building and 
                        customizing websites as a **WordPress Developer**. I also have a keen eye for detail and 
                        strong writing skills, which I leverage as a **Freelance Resume Writer** to create professional 
                        and compelling profiles. I am eager to apply my technical and creative skills to challenging roles.
                    </p>
                    <p class="text-text-muted">
                        Currently an undergraduate pursuing a Higher National Diploma in Information Technology at SLIATE 
                        and completing a Full Stack Developer Course at the University of Moratuwa (CODL).
                    </p>
                </div>

                <!-- Image + Personal Details + Languages (Right Column) -->
                <div class="space-y-6"> 
                    <!-- Profile Photo Card -->
                    <div class="p-6 bg-secondary-dark rounded-xl shadow-xl fade-in-scroll flex justify-center transform transition duration-500 hover:scale-[1.05]">
                        <!-- External link: Added target="_blank" -->
                        <a href="https://www.linkedin.com/in/vidusha-chathuranga-51a334241" target="_blank" class="block" aria-label="View LinkedIn Profile">
                            <div id="profile-picture-container" class="w-48 h-48 rounded-full border-4 border-accent-purple shadow-2xl flex items-center justify-center bg-primary-dark transition duration-500 hover:scale-105 overflow-hidden">
                                <img 
                                    id="profile-image"
                                    src="uploaded:image_1b7f31.jpg-092d766d-c77b-46b7-b9ad-4b0cdd6963ec" 
                                    alt="Vidusha Chathuranga Profile Picture" 
                                    class="w-full h-full object-cover"
                                    onerror="this.style.display='none'; document.getElementById('fallback-icon').style.display='block';"
                                >
                                <!-- Fallback Icon (initially hidden) -->
                                <i 
                                    id="fallback-icon"
                                    class="fas fa-user-tie text-7xl text-accent-purple"
                                    style="display: none;"
                                ></i>
                            </div>
                        </a>
                    </div>

                    <!-- Personal Details Card -->
                    <div class="space-y-4 p-6 bg-secondary-dark rounded-xl shadow-xl fade-in-scroll">
                        <h3 class="text-2xl font-semibold text-accent-purple">Bio Details</h3>
                        <div class="space-y-3 text-text-light">
                            <!-- Birthday (Date from Data) -->
                            <p class="flex items-center space-x-3">
                                <i class="fas fa-cake-candles text-accent-blue text-lg"></i>
                                <span id="birth-date" class="font-bold"></span>
                            </p>
                            <!-- Age (Dynamic Value) -->
                            <p class="flex items-center space-x-3">
                                <i class="fas fa-calendar-alt text-accent-blue text-lg"></i>
                                <span id="auto-age" class="font-bold"></span>
                            </p>
                            <!-- City (Kandy) -->
                            <p class="flex items-center space-x-3">
                                <i class="fas fa-map-marker-alt text-accent-blue text-lg"></i>
                                <span class="font-bold">Kandy</span>
                            </p>
                            <!-- External link: Added target="_blank" -->
                            <a href="https://www.linkedin.com/in/vidusha-chathuranga-51a334241" target="_blank" class="block w-full text-center py-2 mt-4 bg-accent-blue rounded-lg hover:bg-blue-600 transition duration-300 font-medium">
                                View Full LinkedIn Profile <i class="fab fa-linkedin ml-2"></i>
                            </a>
                        </div>
                    </div>
                    
                    <!-- Languages Card -->
                    <div class="space-y-4 p-6 bg-secondary-dark rounded-xl shadow-xl fade-in-scroll">
                        <h3 class="text-2xl font-semibold text-accent-blue">Language Proficiency</h3>
                        <div id="languages-container" class="space-y-4">
                            <!-- Languages will be dynamically populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. Skills Section -->
        <section id="skills" class="py-12 border-t border-secondary-dark">
            <h2 class="text-4xl font-bold text-accent-blue mb-10 text-center fade-in-scroll">
                <i class="fas fa-code mr-3"></i> Core Skills
            </h2>
            <div id="skills-container" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-6">
                <!-- Skills will be dynamically populated by JavaScript -->
            </div>
        </section>
        
        <!-- 4. Experience Section -->
        <section id="experience" class="py-12 border-t border-secondary-dark">
            <h2 class="text-4xl font-bold text-accent-blue mb-10 text-center fade-in-scroll">
                <i class="fas fa-briefcase mr-3"></i> Work & Education
            </h2>
            <div class="grid lg:grid-cols-2 gap-12">
                <!-- Work Experience Card -->
                <div class="bg-secondary-dark p-8 rounded-xl shadow-2xl space-y-4 border border-secondary-dark hover:border-accent-purple transition duration-500 fade-in-scroll">
                    <h3 class="text-3xl font-bold text-text-light">Work Experience</h3>
                    <!-- Item 1 -->
                    <div class="border-l-4 border-accent-purple pl-4">
                        <p class="text-accent-purple font-semibold">August 2025 - Present</p>
                        <h4 class="text-xl font-bold text-white">WordPress Developer (Intern)</h4>
                        <p class="text-text-muted">Allaboutwebservices.com Inc</p>
                        <ul class="list-disc list-inside text-sm text-text-muted mt-2 space-y-1">
                            <li>Managed and developed website content.</li>
                            <li>Performed WordPress development and maintenance.</li>
                            <li>Integrated various AI tools into web solutions.</li>
                        </ul>
                    </div>
                    <!-- Item 2 -->
                    <div class="border-l-4 border-accent-blue pl-4 mt-6">
                        <p class="text-accent-blue font-semibold">2023 - Present</p>
                        <h4 class="text-xl font-bold text-white">Freelance Resume Writing</h4>
                        <p class="text-text-muted">Independent</p>
                        <p class="text-sm text-text-muted mt-2">
                            Crafted tailored resumes for clients across different industries, highlighting their skills, achievements, and qualifications.
                        </p>
                    </div>
                </div>

                <!-- Education Card -->
                <div class="bg-secondary-dark p-8 rounded-xl shadow-2xl space-y-4 border border-secondary-dark hover:border-accent-blue transition duration-500 fade-in-scroll">
                    <h3 class="text-3xl font-bold text-text-light">Education & Training</h3>
                    
                    <!-- Item 1: SLIATE -->
                    <div class="border-l-4 border-accent-blue pl-4">
                        <p class="text-accent-blue font-semibold">2024 - Undergraduate</p>
                        <h4 class="text-xl font-bold text-white flex items-center space-x-2">
                            <i class="fas fa-graduation-cap text-accent-purple text-lg"></i>
                            <span>Higher National Diploma in Information Technology</span>
                        </h4>
                        <p class="text-text-muted">SLIATE</p>
                    </div>
                    
                    <!-- Item 2: University of Moratuwa (CODL) -->
                    <div class="border-l-4 border-accent-purple pl-4 mt-6">
                        <p class="text-accent-purple font-semibold">2024</p>
                        <h4 class="text-xl font-bold text-white flex items-center space-x-2">
                            <i class="fas fa-desktop text-accent-blue text-lg"></i>
                            <span>FULL STACK DEVELOPER COURSE</span>
                        </h4>
                        <p class="text-text-muted">University of Moratuwa (CODL)</p>
                    </div>
                    
                    <!-- Item 3: Jinaraja Boys Collage Gampola -->
                    <div class="border-l-4 border-accent-purple pl-4 mt-6">
                        <p class="text-accent-purple font-semibold">2023</p>
                        <h4 class="text-xl font-bold text-white flex items-center space-x-2">
                            <i class="fas fa-school text-accent-purple text-lg"></i>
                            <span>GCE ADVANCED LEVEL - Engineering Technology Stream</span>
                        </h4>
                        <p class="text-text-muted">Jinaraja Boys Collage Gampola</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 4.5. Licenses & Certificates Section -->
        <section id="licenses-certs" class="py-12 border-t border-secondary-dark">
            <h2 class="text-4xl font-bold text-accent-blue mb-10 text-center fade-in-scroll">
                <i class="fas fa-award mr-3"></i> Licenses & Certificates
            </h2>
            <div class="bg-secondary-dark p-8 rounded-xl shadow-2xl space-y-6 text-center fade-in-scroll border-4 border-orange-500/50">
                <i class="fas fa-lock text-6xl text-orange-500 mb-4"></i>
                <h3 class="text-3xl font-bold text-text-light">Cannot Display Certificates Directly</h3>
                <p class="text-text-muted max-w-2xl mx-auto">
                    To keep your information secure and prevent hacking, **LinkedIn blocks its content from being embedded** into other websites.
                </p>
                <p class="text-text-light font-medium">
                    Please click the button below to view the full, verified list of my licenses and certifications directly on my LinkedIn profile.
                </p>
                <!-- External link: Added target="_blank" -->
                <a href="https://www.linkedin.com/in/vidusha-chathuranga-51a334241/details/certifications/" target="_blank" class="inline-block px-8 py-3 text-lg font-semibold text-white bg-accent-purple rounded-full shadow-lg shadow-violet-500/50 hover:bg-violet-600 transition duration-300 transform hover:scale-105">
                    View Certifications on LinkedIn <i class="fas fa-external-link-alt ml-2"></i>
                </a>
            </div>
        </section>

        <!-- 5. Projects Section -->
        <section id="projects" class="py-12 border-t border-secondary-dark">
            <h2 class="text-4xl font-bold text-accent-blue mb-10 text-center fade-in-scroll">
                <i class="fas fa-laptop-code mr-3"></i> Featured Projects
            </h2>
            <div id="projects-container" class="grid md:grid-cols-2 gap-10">
                <!-- Projects will be dynamically populated by JavaScript -->
            </div>
        </section>

        <!-- 6. Contact Section -->
        <section id="contact" class="py-12 border-t border-secondary-dark">
            <h2 class="text-4xl font-bold text-accent-blue mb-10 text-center fade-in-scroll">
                <i class="fas fa-headset mr-3"></i> Get In Touch
            </h2>
            <div class="max-w-6xl mx-auto grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-6 text-center"> 
                <!-- Contact Items will be dynamically populated by JavaScript -->
            </div>
            <p class="text-center text-text-muted mt-12 fade-in-scroll">
                Located at: No. 180/2 Madagammadda Udagama Mahaudagama **Kandy**.
            </p>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-primary-dark border-t border-secondary-dark mt-16 py-6 text-center text-text-muted">
        <p>&copy; <span id="currentYear"></span> Vidusha Chathuranga. Built with <span class="text-red-500">&hearts;</span> and modern web technologies.</p>
    </footer>

    <script>
        // =================================================================
        // 1. Data Management (Easy to add/remove/edit content here)
        // =================================================================

        const portfolioData = {
            profile: {
                name: "Vidusha Chathuranga",
                whatsappNumber: "94786217491", 
                birthDate: "03/13/2004", // MM/DD/YYYY format for reliable calculation
                city: "Kandy" 
            },
            roles: [
                "Full Stack Aspirant",
                "Versatile WordPress Developer",
                "Professional Resume Writer"
            ],
            skills: [
                { name: "Python", iconClass: "fab fa-python", color: "text-blue-400" },
                { name: "Java", iconClass: "fab fa-java", color: "text-red-500" },
                { name: "C# / .Net", iconClass: "fas fa-code", color: "text-purple-500" },
                { name: "HTML5", iconClass: "fab fa-html5", color: "text-orange-500" },
                { name: "CSS3", iconClass: "fab fa-css3-alt", color: "text-blue-500" },
                { name: "JavaScript", iconClass: "fab fa-js-square", color: "text-yellow-500" },
                { name: "SQL", iconClass: "fas fa-database", color: "text-indigo-400" },
                { name: "Git / GitHub", iconClass: "fab fa-git-alt", color: "text-orange-700" }, 
                { name: "WordPress/Wix", iconClass: "fab fa-wordpress", color: "text-blue-600" },
                { name: "Canva/Adobe PS", iconClass: "fas fa-paint-brush", color: "text-pink-500" },
                { name: "MS Office", iconClass: "fas fa-file-alt", color: "text-green-500" },
                { name: "Resume Writing", iconClass: "fas fa-pen-fancy", color: "text-amber-500" },
            ],
            languages: [
                { name: "Sinhala", proficiency: "Excellent", level: 100 },
                { name: "English", proficiency: "Conversational", level: 65 },
            ],
            projects: [
                {
                    name: "C# POS System",
                    description: "A complete Point-of-Sale (POS) system application designed for retail environments, focusing on efficient inventory management, transaction processing, and sales reporting using a robust backend database. This is a desktop application.",
                    techStack: "C#, .NET Framework, SQL Server, WinForms/WPF",
                    liveDemo: "https://github.com/Vidusha78978/POS-system-shop.git", 
                    github: "https://github.com/Vidusha78978/POS-system-shop.git", 
                    icon: "fas fa-cash-register"
                },
                {
                    name: "Living Miniatures",
                    description: "A functional WordPress E-Commerce website focused on selling small goods. Developed with a focus on user experience and conversion optimization.",
                    techStack: "WordPress, WooCommerce, SEO tools, Plugins",
                    liveDemo: "https://livingminiatures.wuaze.com/", 
                    github: "", 
                    icon: "fas fa-shopping-cart"
                },
                {
                    name: "Magicyarn - WooCommerce Store",
                    description: "A custom-designed WooCommerce store focused on specialized products (e.g., crafts/yarn). Implemented secure payment gateways and inventory tracking for a seamless e-commerce experience.",
                    techStack: "WordPress, WooCommerce, Payment Gateways, Inventory Management",
                    liveDemo: "https://magicyarn.lovestoblog.com/", 
                    github: "", 
                    icon: "fas fa-store" 
                },
                {
                    name: "StudyNest",
                    description: "An educational WordPress website designed for online learning. Integrated Learning Management System (LMS) plugins to provide a structured e-learning environment.",
                    techStack: "WordPress, LMS Plugins (LearnDash/Tutor LMS)",
                    liveDemo: "http://studynest.byethost14.com",
                    github: "", 
                    icon: "fas fa-graduation-cap"
                }
            ],
            contact: [
                // Existing Resume link
                {
                    title: "Resume",
                    details: "Download CV",
                    iconClass: "fas fa-file-download",
                    link: "https://drive.google.com/uc?id=1KFN-VKsfoY1QyN7Ka1DR2vfn4gbL7xzK", // Direct download link
                    animationDelay: "delay-[100ms]",
                    color: "bg-accent-purple hover:bg-violet-600"
                },
                {
                    title: "WhatsApp",
                    details: "Message Me", 
                    iconClass: "fab fa-whatsapp",
                    link: `https://wa.me/94786217491`, 
                    animationDelay: "delay-[200ms]",
                    color: "bg-green-600 hover:bg-green-700"
                },
                {
                    title: "Email",
                    details: "Send an Email",
                    iconClass: "fas fa-envelope",
                    link: "mailto:vidushachathuranga78978@gmail.com",
                    animationDelay: "delay-[300ms]",
                    color: "bg-red-600 hover:bg-red-700"
                },
                {
                    title: "LinkedIn",
                    details: "Profile Link",
                    iconClass: "fab fa-linkedin",
                    link: "https://www.linkedin.com/in/vidusha-chathuranga-51a334241",
                    animationDelay: "delay-[400ms]",
                    color: "bg-blue-600 hover:bg-blue-700"
                },
                {
                    // >>> UPDATED GITHUB LINK HERE <<<
                    title: "GitHub",
                    details: "Code Profile",
                    iconClass: "fab fa-github",
                    link: "https://github.com/Vidusha78978", 
                    animationDelay: "delay-[500ms]",
                    color: "bg-gray-800 hover:bg-gray-700"
                },
                {
                    title: "Facebook",
                    details: "Social Profile",
                    iconClass: "fab fa-facebook",
                    link: "https://web.facebook.com/vidusha.chathuranga.2025",
                    animationDelay: "delay-[600ms]",
                    color: "bg-blue-800 hover:bg-blue-900"
                }
            ]
        };

        // =================================================================
        // 2. Utility Functions
        // =================================================================
        
        /**
         * Calculates the current age based on a birthdate string (MM/DD/YYYY).
         */
        function calculateAge(birthDateString) {
            try {
                const today = new Date();
                const parts = birthDateString.split('/');
                const birthDate = new Date(parts[2], parts[0] - 1, parts[1]);
                
                let age = today.getFullYear() - birthDate.getFullYear();
                const m = today.getMonth() - birthDate.getMonth();
                
                if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
                    age--;
                }
                return `${age} years old`;
            } catch (error) {
                console.error("Error calculating age:", error);
                return "Age calculation error";
            }
        }

        /**
         * Implements the typewriter animation for roles.
         */
        function startRoleAnimation(roles) {
            const textElement = document.getElementById('role-text');
            if (!textElement) {
                console.warn("Role text element not found.");
                return;
            }
            let roleIndex = 0;
            let charIndex = 0;
            let isDeleting = false;
            let speed = 150; 

            function type() {
                try {
                    const currentRole = roles[roleIndex];
                    
                    if (isDeleting) {
                        charIndex--;
                        speed = 75; 
                        textElement.textContent = currentRole.substring(0, charIndex);
                    } else {
                        charIndex++;
                        speed = 150; 
                        textElement.textContent = currentRole.substring(0, charIndex);
                    }

                    if (!isDeleting && charIndex === currentRole.length) {
                        isDeleting = true;
                        speed = 1500; 
                    } else if (isDeleting && charIndex === 0) {
                        isDeleting = false;
                        roleIndex = (roleIndex + 1) % roles.length;
                        speed = 500; 
                    }

                    setTimeout(type, speed);
                } catch (error) {
                    console.error("Role animation failed:", error);
                }
            }
            setTimeout(type, 500); 
        }

        // =================================================================
        // 3. DOM Rendering Functions
        // =================================================================

        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // --- Render Skills ---
        function renderSkills() {
            const container = document.getElementById('skills-container');
            if (!container) return console.error("Skills container not found.");
            
            try {
                container.innerHTML = portfolioData.skills.map((skill, index) => `
                    <div class="bg-secondary-dark p-6 rounded-xl shadow-lg flex flex-col items-center space-y-3 transform hover:scale-105 transition duration-300 border border-secondary-dark hover:border-accent-purple hover:bg-accent-purple fade-in-scroll group" style="transition-delay: ${index * 70}ms;">
                        <i class="${skill.iconClass} ${skill.color} text-4xl transition duration-300 group-hover:text-white"></i>
                        <p class="text-text-light font-medium text-center transition duration-300 group-hover:text-white">${skill.name}</p>
                    </div>
                `).join('');
            } catch (error) {
                console.error("Error rendering skills:", error);
            }
        }
        
        // --- Render Languages ---
        function renderLanguages() {
            const container = document.getElementById('languages-container');
            if (!container) return console.error("Languages container not found.");
            
            try {
                container.innerHTML = portfolioData.languages.map((lang, index) => `
                    <div class="fade-in-scroll" style="transition-delay: ${index * 100}ms;">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-text-light font-medium">${lang.name}</span>
                            <span class="text-accent-purple text-sm font-semibold">${lang.proficiency}</span>
                        </div>
                        <div class="w-full bg-primary-dark rounded-full h-2.5">
                            <div 
                                class="bg-accent-purple h-2.5 rounded-full transition-all duration-1000 ease-out" 
                                style="width: ${lang.level}%"
                            ></div>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error("Error rendering languages:", error);
            }
        }

        // --- Render Projects ---
        function renderProjects() {
            const container = document.getElementById('projects-container');
            if (!container) return console.error("Projects container not found.");

            try {
                container.innerHTML = portfolioData.projects.map((project, index) => {
                    const isCodeRepo = project.liveDemo.includes('github') || project.liveDemo === '#';
                    const primaryButtonText = isCodeRepo ? 'View Source Code' : 'Live Demo';
                    
                    const hasGithub = project.github && project.github !== '';
                    const liveDemoClass = hasGithub ? 'flex-1' : 'w-full';

                    const githubButtonHtml = hasGithub ? `
                        <a href="${project.github}" target="_blank" class="flex-1 text-center py-2 border border-text-muted text-text-muted rounded-lg hover:bg-text-muted hover:text-primary-dark transition duration-300">
                            <i class="fab fa-github mr-2"></i> GitHub Repository
                        </a>
                    ` : '';

                    return `
                    <div class="bg-secondary-dark p-8 rounded-xl shadow-2xl space-y-4 border border-secondary-dark transform transition duration-500 hover:scale-[1.02] hover:shadow-accent-purple/30 fade-in-scroll" style="transition-delay: ${index * 100}ms;">
                        <div class="flex items-center space-x-4">
                            <i class="${project.icon} text-3xl text-accent-purple"></i>
                            <h3 class="text-2xl font-bold text-text-light">${project.name}</h3>
                        </div>
                        <p class="text-text-muted">${project.description}</p>
                        <div class="flex flex-wrap gap-2 text-sm">
                            ${project.techStack.split(', ').map(tech => `<span class="px-3 py-1 bg-primary-dark text-accent-blue rounded-full">${tech}</span>`).join('')}
                        </div>
                        <div class="flex space-x-4 mt-4">
                            <!-- External link: Added target="_blank" -->
                            <a href="${project.liveDemo}" target="_blank" class="${liveDemoClass} text-center py-2 border border-accent-blue text-accent-blue rounded-lg hover:bg-accent-blue hover:text-white transition duration-300">
                                <i class="fas ${isCodeRepo ? 'fas fa-code' : 'fas fa-external-link-alt'} mr-2"></i> ${primaryButtonText}
                            </a>
                            ${githubButtonHtml}
                        </div>
                    </div>
                    `;
                }).join('');
            } catch (error) {
                console.error("Error rendering projects:", error);
            }
        }

        // --- Render Contact ---
        function renderContact() {
            const grid = document.querySelector('#contact > div.grid');
            if (!grid) return console.error("Contact grid not found.");

            try {
                grid.innerHTML = portfolioData.contact.map((item, index) => {
                    const isResumeLink = item.title === 'Resume';
                    const downloadAttribute = isResumeLink ? 'download="Vidusha_Chathuranga_Resume.pdf"' : ''; 
                    
                    // Added target="_blank" to all dynamically generated contact links
                    return `
                    <a href="${item.link}" target="_blank" ${downloadAttribute} class="p-6 rounded-xl shadow-xl space-y-3 transform transition duration-500 hover:scale-110 hover:shadow-lg ${item.color} text-white fade-in-scroll" style="transition-delay: ${index * 150}ms;">
                        <i class="${item.iconClass} text-5xl transform hover:rotate-6 transition duration-300"></i>
                        <h4 class="text-xl font-bold">${item.title}</h4>
                        <p class="text-sm font-light opacity-90">${item.details}</p>
                    </a>
                    `;
                }).join('');
            } catch (error) {
                console.error("Error rendering contact section:", error);
            }
        }

        // =================================================================
        // 4. Animation and Interaction Logic (Fade on Scroll)
        // =================================================================
        
        const appearOptions = {
            threshold: 0,
            rootMargin: "0px 0px -100px 0px"
        };

        const appearOnScroll = new IntersectionObserver(function(entries, observer) {
            entries.forEach(entry => {
                if (!entry.isIntersecting) {
                    return;
                }
                entry.target.classList.add('visible');
                observer.unobserve(entry.target);
            });
        }, appearOptions);


        // =================================================================
        // 5. Welcome Modal Logic
        // =================================================================
        const welcomeModal = document.getElementById('welcome-modal');
        let modalDismissed = false; // Flag to ensure timer doesn't interfere after manual close

        /** Shows the welcome modal with an animation */
        function showWelcomeModal() {
            if (modalDismissed) return;
            welcomeModal.classList.remove('hidden', 'modal-exit-active');
            welcomeModal.classList.add('modal-enter-active');
            
            // Set a timer to automatically dismiss the modal after 4 seconds
            setTimeout(() => {
                if (!modalDismissed) {
                    hideWelcomeModal();
                }
            }, 4000); 
        }

        /** Hides the welcome modal with an animation */
        function hideWelcomeModal() {
            modalDismissed = true; // Set flag when hidden
            welcomeModal.classList.remove('modal-enter-active');
            welcomeModal.classList.add('modal-exit-active');
            
            // Fully hide the modal after the transition finishes (0.5s)
            setTimeout(() => {
                welcomeModal.classList.add('hidden');
            }, 500); 
        }

        // Make the function available globally for the button's onclick
        window.hideWelcomeModal = hideWelcomeModal;

        // =================================================================
        // 6. Tone.js Ambient Music Generator
        // =================================================================
        let synth = null;
        let isPlaying = false;
        const musicToggle = document.getElementById('musicToggle');
        const musicIcon = document.getElementById('musicIcon');

        function startAmbientSound() {
            try {
                Tone.start();

                if (!synth) {
                    synth = new Tone.FMSynth({
                        volume: -24, 
                        harmonicity: 0.8,
                        modulationIndex: 10,
                        oscillator: { type: "sine" },
                        envelope: {
                            attack: 8,
                            decay: 0.5,
                            sustain: 0.8,
                            release: 10
                        },
                        modulation: { type: "square" },
                        modulationEnvelope: { attack: 1, decay: 0, sustain: 1, release: 0.5 }
                    }).toDestination();
                    
                    const loop = new Tone.Loop(time => {
                        synth.triggerAttackRelease(["G3", "Bb3", "D4"], "8n", time);
                    }, "8n").start(0); 

                    Tone.Transport.bpm.value = 30; 
                    Tone.Transport.start();
                }

                synth.volume.value = -24; 
                isPlaying = true;
                musicIcon.classList.remove('fa-volume-mute');
                musicIcon.classList.add('fa-volume-up');
            } catch (error) {
                console.error("Tone.js failed to start:", error);
            }
        }

        function stopAmbientSound() {
            if (synth) {
                synth.volume.value = -100; 
                isPlaying = false;
                musicIcon.classList.remove('fa-volume-up');
                musicIcon.classList.add('fa-volume-mute');
            }
        }

        if (musicToggle) {
            musicToggle.addEventListener('click', () => {
                if (isPlaying) {
                    stopAmbientSound();
                } else {
                    startAmbientSound();
                }
            });
        }


        // =================================================================
        // 7. Initialisation
        // =================================================================

        function initializePortfolio() {
            // 1. Render all dynamic content
            renderSkills();
            renderLanguages(); 
            renderProjects(); 
            renderContact();
            
            // 2. Start the Role Typewriter Animation
            startRoleAnimation(portfolioData.roles);

            // 3. Set the static birthday and calculated age
            const birthDateEl = document.getElementById('birth-date');
            const autoAgeEl = document.getElementById('auto-age');

            if (birthDateEl) {
                birthDateEl.textContent = portfolioData.profile.birthDate;
            }
            if (autoAgeEl) {
                autoAgeEl.textContent = calculateAge(portfolioData.profile.birthDate);
            }

            // 4. Show the Welcome Modal
            showWelcomeModal();

            // 5. Apply the fade-in-scroll animation observer
            const faders = document.querySelectorAll('.fade-in-scroll');
            faders.forEach(fader => {
                appearOnScroll.observe(fader);
            });
        }
        
        window.onload = function() {
            try {
                initializePortfolio();
            } catch (error) {
                // If anything critical fails during initialization, log it and alert the user (non-intrusively).
                console.error("An error occurred during portfolio initialization:", error);
                document.body.insertAdjacentHTML('afterbegin', '<div style="position:fixed;top:0;left:0;width:100%;background:#ef4444;color:white;padding:10px;z-index:9999;text-align:center;">Content loading error. Please check the browser console for details.</div>');
            }
        };

        // Smooth Scrolling for internal links (Crucial: prevents internal links from opening new tabs)
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>
</body>
</html>
